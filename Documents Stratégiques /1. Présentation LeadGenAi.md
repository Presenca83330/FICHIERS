# PRÉSENTATION LEADGENAI ADBUILDER

---

## 🎯 1. VISION GLOBALE & OBJECTIFS

### Mission Principale
**LeadGenAI AdBuilder** est une plateforme SaaS B2B hautement spécialisée dans le marketing digital des professionnels de l'immobilier commercial.

### Proposition de Valeur
LeadGenAI AdBuilder est la première plateforme IA conçue pour automatiser toute la prospection commerciale dans l'immobilier B2B. Agents, agences et réseaux spécialisés en fonds de commerce, murs, locaux ou entreprises peuvent déléguer à l'IA l'ensemble de leurs actions marketing : rédaction, diffusion, sourcing, relance, landing pages, newsletters et campagnes.

### Promesse Client
- **En 3 clics** : LeadGenAI AdBuilder génère, diffuse et pilote des opérations marketing et commerciales.
- **Sans compétence technique** requise.
- **Résultats mesurables** : plus de leads, moins de travail manuel, plus de temps pour vos mandats.

### Bénéfices Quantifiés
- Des centaines d'heures gagnées chaque année.
- Des milliers d'euros économisés annuellement.
- Référencement local optimisé automatiquement.
- Leads vendeurs et acquéreurs générés en masse.

---

## 🤖 2. AGENTS IA SPÉCIALISÉS

Chaque fonctionnalité repose sur un agent IA dédié, activable en un clic :

- **📝 IA Agent Annonce** : génération automatique d'annonces immobilières professionnelles.
- **📧 IA Agent Marketing** : campagnes marketing multicanal automatisées.
- **🌐 IA Agent Landing Page** : création de pages de conversion personnalisées.
- **📱 IA Agent Réseaux Sociaux** : rédaction et publication automatiques multi-plateformes.
- **🎯 IA Agent Zone de Chalandise** : enrichissement contextuel géographique.
- **🔍 IA Agent Sourcing** : acquisition de contacts qualifiés.
- **🎯 IA Agent Campagne Publicitaire** : préparation et optimisation de campagnes payantes.

---

## 🖥️ 3. INTERFACE & PILOTAGE

### Caractéristiques Interface
- **Espace client simple et modulaire**.
- **Aucune compétence technique requise**.
- **Dashboard visuel ergonomique**.
- **Suivi temps réel** : leads, clics, campagnes.

### Gestion Multi-Utilisateurs
- **Agences indépendantes** : accès complet autonome.
- **Réseaux multi-agences** : gestion hiérarchique.
- **Connexion sécurisée** pour chaque agence et collaborateurs.

### Architecture Technique
- **Compatible white-label** pour réseaux multi-agences.
- **Stockage sécurisé** avec hébergement européen.
- **Formules d'abonnement** simples et évolutives.

---

## 🏗️ 4. ARCHITECTURE MULTI-TENANT

### Objectif Architectural
Garantir une gestion **multi-tenant sécurisée et cloisonnée** avec deux types de structures clients distinctes.

### 4.1 STRUCTURE RÉSEAU

#### Organisation Hiérarchique
```
RÉSEAU (reseau)
├── DIRECTION RÉSEAU (reseau_direction)
└── AGENCES RÉSEAU (reseau_agence)
    ├── RESPONSABLE AGENCE (reseau_agence_responsable)
    └── COLLABORATEURS (reseau_agence_collaborateur)
```

- **Réseau / Direction réseau** : accès aux agents IA + tableau de bord RESEAU-ESPACE (statistiques, abonnements, agences).
- **Agences réseau / Responsables** : accès aux agents IA + tableau de bord CLIENT-ESPACE (statistiques, finances, infos entreprise).
- **Collaborateurs d'agence** : accès aux agents IA ; accès CLIENT-ESPACE uniquement sur dérogation.

**Modèle économique** : abonnement souscrit par chaque agence réseau, avec ou sans participation du réseau.

### 4.2 STRUCTURE AGENCE INDÉPENDANTE

#### Organisation Hiérarchique
```
AGENCE INDÉPENDANTE (agence_independante)
├── RESPONSABLE (agence_independante_responsable)
└── COLLABORATEURS (agence_independante_collaborateur)
```

- **Responsable agence indépendante** : accès aux agents IA + tableau de bord CLIENT-ESPACE.
- **Collaborateurs agence indépendante** : accès aux agents IA ; accès CLIENT-ESPACE uniquement sur dérogation.

**Modèle économique** : abonnement souscrit directement par l'agence, gestion autonome complète.

---

## 🔐 5. DROITS & ACCÈS PAR PROFIL

### 5.1 Droits Réseau
- **Direction réseau** : accès agents IA + RESEAU-ESPACE.
- **Responsable agence réseau** : accès agents IA + CLIENT-ESPACE.
- **Collaborateur agence réseau** : accès agents IA uniquement (CLIENT-ESPACE sur dérogation).

### 5.2 Droits Agence Indépendante
- **Responsable agence indépendante** : accès agents IA + CLIENT-ESPACE.
- **Collaborateur agence indépendante** : accès agents IA uniquement (CLIENT-ESPACE sur dérogation).

⚠️ Aucun collaborateur ou client n’a accès à l’administration PRESENCA.

---

## 🗄️ 6. ARCHITECTURE BASE DE DONNÉES

### Modèle Multi-Tenant Hiérarchique
Structure à trois niveaux :
1. **RÉSEAU** : entité commerciale pilote (franchise, groupe).
2. **AGENCE** : structure utilisatrice opérationnelle.
3. **UTILISATEURS** : responsables et collaborateurs.

### 6.1 Tables Client Business
- **Réseau** : `reseau`, `reseau_direction`, `reseau_agence`, `reseau_agence_responsable`, `reseau_agence_collaborateur`.
- **Agence indépendante** : `agence_independante`, `agence_independante_responsable`, `agence_independante_collaborateur`.
- **Pivot métier** : `utilisateurs`.

### 6.2 Tables Authentification 
- **`auth.users` (Supabase)** : gère uniquement login et identité technique (email, provider, UID).
- **`users` (miroir système)** : reliée à `auth.users`, contient email, rôle, rôle système, interface par défaut, `organisation_id`.
- **`organisations`** : pivot multi-tenant, chaque réseau ou agence indépendante = une organisation.
- **`utilisateurs` (profil métier)** : extension métier de `users`, contient type de compte, rôle métier, statut, et rattachement organisation.

👉 Chaque utilisateur est connecté via `auth.users` → synchronisé dans `users` → enrichi dans `utilisateurs`.

### ROUTES APRES CONNEXION 
- Tous les adminstrateurs PRESENCA accèdent à l'espace  ADMIN-PRESENCA
- Les reseaux et leurs directeurs reseau (reseau, reseau_direction) accèdent à RESEAU-ESPACE
- Tous les autres accèdent aux Agents IA sur la page accueil-leadgenai-adbuilder
Schéma :
- admin_presenca / superadmin → /admin-presenca
- reseau / reseau_direction → /espace-reseau
- tout le reste (reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur, agence_independante, agence_independante_responsable, agence_independante_collaborateur) → /accueil-leadgenai

### 6.3 Tables Connexions Tierces
- `brevo_connexion` – API Email Marketing.
- `zoho_connexion` – API CRM.
- `openai_connexion` – API Intelligence Artificielle.
- `linkedin_connexion`, `facebook_connexion`, `instagram_connexion` – APIs réseaux sociaux.
- `abonnement_stripe` – gestion des abonnements.

### 6.4 Table Métier `utilisateurs`
- Représente le **profil métier enrichi** de chaque user connecté.
- Lien : `utilisateurs.utilisateur_auth_uid → auth.users.id` (FK obligatoire avec cascade).
- Contraintes : `UNIQUE (utilisateur_auth_uid)` et `UNIQUE (utilisateur_email)`.
- Contenu : prénom, nom, rôle, type de compte, statut, métadonnées métier.

### 6.5 Relation `users ↔ utilisateurs`
- **users** : profil système relié à `auth.users` (authentification, rôle système, organisation).
- **utilisateurs** : extension métier (rôle métier, type de compte, statut, permissions internes).
- Relation stricte 1:1 :
  - `utilisateurs.utilisateur_auth_uid` → `auth.users.id` (via `users.users_auth_id`).
  - `ON DELETE CASCADE` : la suppression d’un `users` entraîne la suppression de l’`utilisateurs` correspondant.

👉 Cette séparation assure :
- Cohérence multi-tenant : isolation par `organisation_id`.
- Traçabilité : audit indépendant des données métier.
- Souplesse : ajout de champs métier sans toucher à l’auth.

---

## 🔒 7. EXIGENCES DE SÉCURITÉ

### Principes Fondamentaux
1. **RLS activée** sur toutes les tables.
2. **FK obligatoire** : `organisation_id` dans `users` et `utilisateurs`.
3. **Aucun accès** hors organisation de rattachement.
4. **Accès complet** uniquement pour `admin_presenca`.

### Cloisonnement Multi-Tenant
- **Structure à trois niveaux** (réseau → agence → utilisateurs).
- **Hooks Lovable** : gèrent uniquement la session et la redirection selon rôle (pas de création auto).
- **Impersonation** réservée à l’admin PRESENCA.
- **Audit logs** : toutes les actions sensibles sont tracées.

---

## 🎯 Synthèse
- **users** = profil système (auth + organisation + rôle).
- **utilisateurs** = profil métier enrichi (type, statut, permissions).
- **organisations** = pivot multi-tenant.

👉 Ce modèle sépare clairement l’authentification (sécurité) du métier (multi-tenant hiérarchique).  
👉 L’**admin PRESENCA** reste le garant de la cohérence (validation des comptes).

