# PRÃ‰SENTATION LEADGENAI ADBUILDER

---

## ğŸ¯ 1. VISION GLOBALE & OBJECTIFS

### Mission Principale
**LeadGenAI AdBuilder** est une plateforme SaaS B2B hautement spÃ©cialisÃ©e dans le marketing digital des professionnels de l'immobilier commercial.

### Proposition de Valeur
LeadGenAI AdBuilder est la premiÃ¨re plateforme IA conÃ§ue pour automatiser toute la prospection commerciale dans l'immobilier B2B. Agents, agences et rÃ©seaux spÃ©cialisÃ©s en fonds de commerce, murs, locaux ou entreprises peuvent dÃ©lÃ©guer Ã  l'IA l'ensemble de leurs actions marketing : rÃ©daction, diffusion, sourcing, relance, landing pages, newsletters et campagnes.

### Promesse Client
- **En 3 clics** : LeadGenAI AdBuilder gÃ©nÃ¨re, diffuse et pilote des opÃ©rations marketing et commerciales.
- **Sans compÃ©tence technique** requise.
- **RÃ©sultats mesurables** : plus de leads, moins de travail manuel, plus de temps pour vos mandats.

### BÃ©nÃ©fices QuantifiÃ©s
- Des centaines d'heures gagnÃ©es chaque annÃ©e.
- Des milliers d'euros Ã©conomisÃ©s annuellement.
- RÃ©fÃ©rencement local optimisÃ© automatiquement.
- Leads vendeurs et acquÃ©reurs gÃ©nÃ©rÃ©s en masse.

---

## ğŸ¤– 2. AGENTS IA SPÃ‰CIALISÃ‰S

Chaque fonctionnalitÃ© repose sur un agent IA dÃ©diÃ©, activable en un clic :

- **ğŸ“ IA Agent Annonce** : gÃ©nÃ©ration automatique d'annonces immobiliÃ¨res professionnelles.
- **ğŸ“§ IA Agent Marketing** : campagnes marketing multicanal automatisÃ©es.
- **ğŸŒ IA Agent Landing Page** : crÃ©ation de pages de conversion personnalisÃ©es.
- **ğŸ“± IA Agent RÃ©seaux Sociaux** : rÃ©daction et publication automatiques multi-plateformes.
- **ğŸ¯ IA Agent Zone de Chalandise** : enrichissement contextuel gÃ©ographique.
- **ğŸ” IA Agent Sourcing** : acquisition de contacts qualifiÃ©s.
- **ğŸ¯ IA Agent Campagne Publicitaire** : prÃ©paration et optimisation de campagnes payantes.

---

## ğŸ–¥ï¸ 3. INTERFACE & PILOTAGE

### CaractÃ©ristiques Interface
- **Espace client simple et modulaire**.
- **Aucune compÃ©tence technique requise**.
- **Dashboard visuel ergonomique**.
- **Suivi temps rÃ©el** : leads, clics, campagnes.

### Gestion Multi-Utilisateurs
- **Agences indÃ©pendantes** : accÃ¨s complet autonome.
- **RÃ©seaux multi-agences** : gestion hiÃ©rarchique.
- **Connexion sÃ©curisÃ©e** pour chaque agence et collaborateurs.

### Architecture Technique
- **Compatible white-label** pour rÃ©seaux multi-agences.
- **Stockage sÃ©curisÃ©** avec hÃ©bergement europÃ©en.
- **Formules d'abonnement** simples et Ã©volutives.

---

## ğŸ—ï¸ 4. ARCHITECTURE MULTI-TENANT

### Objectif Architectural
Garantir une gestion **multi-tenant sÃ©curisÃ©e et cloisonnÃ©e** avec deux types de structures clients distinctes.

### 4.1 STRUCTURE RÃ‰SEAU

#### Organisation HiÃ©rarchique
```
RÃ‰SEAU (reseau)
â”œâ”€â”€ DIRECTION RÃ‰SEAU (reseau_direction)
â””â”€â”€ AGENCES RÃ‰SEAU (reseau_agence)
    â”œâ”€â”€ RESPONSABLE AGENCE (reseau_agence_responsable)
    â””â”€â”€ COLLABORATEURS (reseau_agence_collaborateur)
```

- **RÃ©seau / Direction rÃ©seau** : accÃ¨s aux agents IA + tableau de bord RESEAU-ESPACE (statistiques, abonnements, agences).
- **Agences rÃ©seau / Responsables** : accÃ¨s aux agents IA + tableau de bord CLIENT-ESPACE (statistiques, finances, infos entreprise).
- **Collaborateurs d'agence** : accÃ¨s aux agents IA ; accÃ¨s CLIENT-ESPACE uniquement sur dÃ©rogation.

**ModÃ¨le Ã©conomique** : abonnement souscrit par chaque agence rÃ©seau, avec ou sans participation du rÃ©seau.

### 4.2 STRUCTURE AGENCE INDÃ‰PENDANTE

#### Organisation HiÃ©rarchique
```
AGENCE INDÃ‰PENDANTE (agence_independante)
â”œâ”€â”€ RESPONSABLE (agence_independante_responsable)
â””â”€â”€ COLLABORATEURS (agence_independante_collaborateur)
```

- **Responsable agence indÃ©pendante** : accÃ¨s aux agents IA + tableau de bord CLIENT-ESPACE.
- **Collaborateurs agence indÃ©pendante** : accÃ¨s aux agents IA ; accÃ¨s CLIENT-ESPACE uniquement sur dÃ©rogation.

**ModÃ¨le Ã©conomique** : abonnement souscrit directement par l'agence, gestion autonome complÃ¨te.

---

## ğŸ” 5. DROITS & ACCÃˆS PAR PROFIL

### 5.1 Droits RÃ©seau
- **Direction rÃ©seau** : accÃ¨s agents IA + RESEAU-ESPACE.
- **Responsable agence rÃ©seau** : accÃ¨s agents IA + CLIENT-ESPACE.
- **Collaborateur agence rÃ©seau** : accÃ¨s agents IA uniquement (CLIENT-ESPACE sur dÃ©rogation).

### 5.2 Droits Agence IndÃ©pendante
- **Responsable agence indÃ©pendante** : accÃ¨s agents IA + CLIENT-ESPACE.
- **Collaborateur agence indÃ©pendante** : accÃ¨s agents IA uniquement (CLIENT-ESPACE sur dÃ©rogation).

âš ï¸ Aucun collaborateur ou client nâ€™a accÃ¨s Ã  lâ€™administration PRESENCA.

---

## ğŸ—„ï¸ 6. ARCHITECTURE BASE DE DONNÃ‰ES

### ModÃ¨le Multi-Tenant HiÃ©rarchique
Structure Ã  trois niveaux :
1. **RÃ‰SEAU** : entitÃ© commerciale pilote (franchise, groupe).
2. **AGENCE** : structure utilisatrice opÃ©rationnelle.
3. **UTILISATEURS** : responsables et collaborateurs.

### 6.1 Tables Client Business
- **RÃ©seau** : `reseau`, `reseau_direction`, `reseau_agence`, `reseau_agence_responsable`, `reseau_agence_collaborateur`.
- **Agence indÃ©pendante** : `agence_independante`, `agence_independante_responsable`, `agence_independante_collaborateur`.
- **Pivot mÃ©tier** : `utilisateurs`.

### 6.2 Tables Authentification 
- **`auth.users` (Supabase)** : gÃ¨re uniquement login et identitÃ© technique (email, provider, UID).
- **`users` (miroir systÃ¨me)** : reliÃ©e Ã  `auth.users`, contient email, rÃ´le, rÃ´le systÃ¨me, interface par dÃ©faut, `organisation_id`.
- **`organisations`** : pivot multi-tenant, chaque rÃ©seau ou agence indÃ©pendante = une organisation.
- **`utilisateurs` (profil mÃ©tier)** : extension mÃ©tier de `users`, contient type de compte, rÃ´le mÃ©tier, statut, et rattachement organisation.

ğŸ‘‰ Chaque utilisateur est connectÃ© via `auth.users` â†’ synchronisÃ© dans `users` â†’ enrichi dans `utilisateurs`.

### ROUTES APRES CONNEXION 
- Tous les adminstrateurs PRESENCA accÃ¨dent Ã  l'espace  ADMIN-PRESENCA
- Les reseaux et leurs directeurs reseau (reseau, reseau_direction) accÃ¨dent Ã  RESEAU-ESPACE
- Tous les autres accÃ¨dent aux Agents IA sur la page accueil-leadgenai-adbuilder
SchÃ©ma :
- admin_presenca / superadmin â†’ /admin-presenca
- reseau / reseau_direction â†’ /espace-reseau
- tout le reste (reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur, agence_independante, agence_independante_responsable, agence_independante_collaborateur) â†’ /accueil-leadgenai

### 6.3 Tables Connexions Tierces
- `brevo_connexion` â€“ API Email Marketing.
- `zoho_connexion` â€“ API CRM.
- `openai_connexion` â€“ API Intelligence Artificielle.
- `linkedin_connexion`, `facebook_connexion`, `instagram_connexion` â€“ APIs rÃ©seaux sociaux.
- `abonnement_stripe` â€“ gestion des abonnements.

### 6.4 Table MÃ©tier `utilisateurs`
- ReprÃ©sente le **profil mÃ©tier enrichi** de chaque user connectÃ©.
- Lien : `utilisateurs.utilisateur_auth_uid â†’ auth.users.id` (FK obligatoire avec cascade).
- Contraintes : `UNIQUE (utilisateur_auth_uid)` et `UNIQUE (utilisateur_email)`.
- Contenu : prÃ©nom, nom, rÃ´le, type de compte, statut, mÃ©tadonnÃ©es mÃ©tier.

### 6.5 Relation `users â†” utilisateurs`
- **users** : profil systÃ¨me reliÃ© Ã  `auth.users` (authentification, rÃ´le systÃ¨me, organisation).
- **utilisateurs** : extension mÃ©tier (rÃ´le mÃ©tier, type de compte, statut, permissions internes).
- Relation stricte 1:1 :
  - `utilisateurs.utilisateur_auth_uid` â†’ `auth.users.id` (via `users.users_auth_id`).
  - `ON DELETE CASCADE` : la suppression dâ€™un `users` entraÃ®ne la suppression de lâ€™`utilisateurs` correspondant.

ğŸ‘‰ Cette sÃ©paration assure :
- CohÃ©rence multi-tenant : isolation par `organisation_id`.
- TraÃ§abilitÃ© : audit indÃ©pendant des donnÃ©es mÃ©tier.
- Souplesse : ajout de champs mÃ©tier sans toucher Ã  lâ€™auth.

---

## ğŸ”’ 7. EXIGENCES DE SÃ‰CURITÃ‰

### Principes Fondamentaux
1. **RLS activÃ©e** sur toutes les tables.
2. **FK obligatoire** : `organisation_id` dans `users` et `utilisateurs`.
3. **Aucun accÃ¨s** hors organisation de rattachement.
4. **AccÃ¨s complet** uniquement pour `admin_presenca`.

### Cloisonnement Multi-Tenant
- **Structure Ã  trois niveaux** (rÃ©seau â†’ agence â†’ utilisateurs).
- **Hooks Lovable** : gÃ¨rent uniquement la session et la redirection selon rÃ´le (pas de crÃ©ation auto).
- **Impersonation** rÃ©servÃ©e Ã  lâ€™admin PRESENCA.
- **Audit logs** : toutes les actions sensibles sont tracÃ©es.

---

## ğŸ¯ SynthÃ¨se
- **users** = profil systÃ¨me (auth + organisation + rÃ´le).
- **utilisateurs** = profil mÃ©tier enrichi (type, statut, permissions).
- **organisations** = pivot multi-tenant.

ğŸ‘‰ Ce modÃ¨le sÃ©pare clairement lâ€™authentification (sÃ©curitÃ©) du mÃ©tier (multi-tenant hiÃ©rarchique).  
ğŸ‘‰ Lâ€™**admin PRESENCA** reste le garant de la cohÃ©rence (validation des comptes).

